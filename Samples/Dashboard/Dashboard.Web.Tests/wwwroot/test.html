<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Tests - React Testing Library</title>

  <!-- Dashboard CSS -->
  <link rel="stylesheet" href="../Dashboard.Web/wwwroot/css/variables.css">
  <link rel="stylesheet" href="../Dashboard.Web/wwwroot/css/base.css">
  <link rel="stylesheet" href="../Dashboard.Web/wwwroot/css/components.css">
  <link rel="stylesheet" href="../Dashboard.Web/wwwroot/css/layout.css">

  <!-- React 18 -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- React Testing Library -->
  <script crossorigin src="https://unpkg.com/@testing-library/dom@9.3.4/dist/@testing-library/dom.umd.js"></script>
  <script crossorigin src="https://unpkg.com/@testing-library/react@14.2.1/dist/@testing-library/react.umd.js"></script>
  <script crossorigin src="https://unpkg.com/@testing-library/user-event@14.5.2/dist/@testing-library/user-event.umd.js"></script>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }

    .test-header {
      background: linear-gradient(135deg, #2ca3fa 0%, #00bcd4 100%);
      color: white;
      padding: 24px;
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .test-header h1 {
      margin: 0 0 8px 0;
      font-size: 24px;
    }

    .test-header p {
      margin: 0;
      opacity: 0.9;
    }

    .test-output {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.6;
      white-space: pre-wrap;
      max-height: 600px;
      overflow-y: auto;
    }

    .test-output .pass {
      color: #10b981;
    }

    .test-output .fail {
      color: #ef4444;
    }

    .test-output .section {
      color: #60a5fa;
      font-weight: bold;
    }

    .test-container {
      display: flex;
      gap: 20px;
    }

    .test-results {
      flex: 1;
    }

    .test-render {
      flex: 1;
      background: white;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e5e7eb;
    }

    .test-render h3 {
      margin: 0 0 16px 0;
      font-size: 16px;
      color: #374151;
    }

    #root {
      min-height: 400px;
      border: 1px dashed #d1d5db;
      border-radius: 8px;
    }

    .stats {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }

    .stat {
      background: white;
      padding: 16px 24px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .stat-value {
      font-size: 32px;
      font-weight: bold;
    }

    .stat-label {
      color: #6b7280;
      font-size: 14px;
    }

    .stat.passed .stat-value { color: #10b981; }
    .stat.failed .stat-value { color: #ef4444; }
    .stat.total .stat-value { color: #2ca3fa; }

    .run-btn {
      background: #2ca3fa;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      margin-top: 20px;
    }

    .run-btn:hover {
      background: #1e8cd8;
    }

    .run-btn:disabled {
      background: #9ca3af;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="test-header">
    <h1>ğŸ§ª Healthcare Dashboard Test Suite</h1>
    <p>Comprehensive end-to-end tests using React Testing Library</p>
  </div>

  <div class="stats">
    <div class="stat passed">
      <div class="stat-value" id="passed-count">-</div>
      <div class="stat-label">Passed</div>
    </div>
    <div class="stat failed">
      <div class="stat-value" id="failed-count">-</div>
      <div class="stat-label">Failed</div>
    </div>
    <div class="stat total">
      <div class="stat-value" id="total-count">-</div>
      <div class="stat-label">Total</div>
    </div>
  </div>

  <button class="run-btn" id="run-btn" onclick="runTests()">â–¶ Run Tests</button>

  <div class="test-container" style="margin-top: 20px;">
    <div class="test-results">
      <div class="test-output" id="output">
Tests will appear here when you click "Run Tests"...

<span class="section">ğŸ“¦ Test Categories:</span>
- Navigation Tests
- Dashboard Page Tests
- Patients Page Tests
- Practitioners Page Tests
- Appointments Page Tests
- Sidebar Tests
- Header Tests
- Error Handling Tests

Click the button above to start the test suite.
      </div>
    </div>

    <div class="test-render">
      <h3>Test Render Container</h3>
      <div id="root"></div>
    </div>
  </div>

  <!-- Set up Testing Library globals -->
  <script>
    // Alias for Testing Library
    window.TestingLibrary = {
      render: window.ReactTestingLibrary?.render || function(element) {
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(element);
        return {
          container,
          baseElement: document.body,
          unmount: () => root.unmount(),
          rerender: (newElement) => root.render(newElement)
        };
      },
      screen: window.ReactTestingLibrary?.screen || {
        getByText: (text) => {
          const elements = document.body.querySelectorAll('*');
          for (const el of elements) {
            if (el.textContent?.includes(text)) return el;
          }
          throw new Error(`Text not found: ${text}`);
        },
        queryByText: (text) => {
          const elements = document.body.querySelectorAll('*');
          for (const el of elements) {
            if (el.textContent?.includes(text)) return el;
          }
          return null;
        },
        getAllByText: (text) => {
          return Array.from(document.body.querySelectorAll('*')).filter(el => el.textContent?.includes(text));
        },
        queryAllByText: (text) => {
          return Array.from(document.body.querySelectorAll('*')).filter(el => el.textContent?.includes(text));
        },
        findByText: async (text, options = {}) => {
          const timeout = options.timeout || 5000;
          const start = Date.now();
          while (Date.now() - start < timeout) {
            try {
              return window.TestingLibrary.screen.getByText(text);
            } catch {
              await new Promise(r => setTimeout(r, 50));
            }
          }
          throw new Error(`Text not found within timeout: ${text}`);
        },
        getByRole: (role, options) => document.querySelector(`[role="${role}"]`),
        queryByRole: (role, options) => document.querySelector(`[role="${role}"]`),
        getByPlaceholderText: (text) => document.querySelector(`[placeholder*="${text}"]`),
        queryByPlaceholderText: (text) => document.querySelector(`[placeholder*="${text}"]`),
        getByTestId: (id) => document.querySelector(`[data-testid="${id}"]`),
        queryByTestId: (id) => document.querySelector(`[data-testid="${id}"]`),
        getByLabelText: (text) => {
          const label = Array.from(document.querySelectorAll('label')).find(l => l.textContent?.includes(text));
          if (!label) throw new Error(`Label not found: ${text}`);
          const forId = label.getAttribute('for');
          return forId ? document.getElementById(forId) : label.querySelector('input, select, textarea');
        },
        queryByLabelText: (text) => {
          try { return window.TestingLibrary.screen.getByLabelText(text); } catch { return null; }
        }
      },
      fireEvent: {
        click: (element) => element?.click?.(),
        change: (element, eventInit) => {
          if (eventInit?.target?.value !== undefined) {
            element.value = eventInit.target.value;
            element.dispatchEvent(new Event('change', { bubbles: true }));
            element.dispatchEvent(new Event('input', { bubbles: true }));
          }
        }
      },
      userEvent: window.UserEvent?.setup?.() || {
        click: async (element) => element?.click?.(),
        type: async (element, text) => {
          element.focus();
          for (const char of text) {
            element.value += char;
            element.dispatchEvent(new Event('input', { bubbles: true }));
            element.dispatchEvent(new Event('change', { bubbles: true }));
            await new Promise(r => setTimeout(r, 10));
          }
        }
      },
      waitFor: async (callback, options = {}) => {
        const timeout = options.timeout || 5000;
        const start = Date.now();
        while (Date.now() - start < timeout) {
          try {
            callback();
            return;
          } catch {
            await new Promise(r => setTimeout(r, 50));
          }
        }
        throw new Error('waitFor timeout');
      },
      cleanup: () => {
        const root = document.getElementById('root');
        if (root) root.innerHTML = '';
      }
    };

    // Console output capture
    const originalLog = console.log;
    const output = document.getElementById('output');

    console.log = function(...args) {
      originalLog.apply(console, args);
      const message = args.map(a => typeof a === 'object' ? JSON.stringify(a) : a).join(' ');

      let formattedMessage = message;
      if (message.includes('âœ…')) {
        formattedMessage = `<span class="pass">${message}</span>`;
      } else if (message.includes('âŒ')) {
        formattedMessage = `<span class="fail">${message}</span>`;
      } else if (message.includes('ğŸ“¦') || message.includes('ğŸ§ª')) {
        formattedMessage = `<span class="section">${message}</span>`;
      }

      output.innerHTML += formattedMessage + '\n';
      output.scrollTop = output.scrollHeight;
    };

    // Test results display
    function updateStats() {
      if (window.testsPassed !== undefined) {
        document.getElementById('passed-count').textContent = window.testsPassed;
        document.getElementById('failed-count').textContent = window.testsFailed;
        document.getElementById('total-count').textContent = window.testsPassed + window.testsFailed;
      }
    }

    // Run tests function
    async function runTests() {
      const btn = document.getElementById('run-btn');
      btn.disabled = true;
      btn.textContent = 'â³ Running...';

      output.innerHTML = '';
      window.testsPassed = 0;
      window.testsFailed = 0;

      try {
        // Run the pure JS tests
        await runPureJsTests();
      } catch (error) {
        console.log('âŒ Test runner error: ' + error.message);
      }

      btn.disabled = false;
      btn.textContent = 'â–¶ Run Tests Again';
      updateStats();
    }

    // Pure JavaScript test implementation (matching the C# test structure)
    async function runPureJsTests() {
      console.log('\nğŸ§ª Running Dashboard Tests\n');
      console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');

      const mockData = {
        patients: [
          { id: 'patient-001', identifier: 'PAT-0001', given_name: 'John', family_name: 'Smith', birth_date: '1985-03-15', gender: 'male', active: true, email: 'john.smith@email.com' },
          { id: 'patient-002', identifier: 'PAT-0002', given_name: 'Jane', family_name: 'Doe', birth_date: '1990-07-22', gender: 'female', active: true, email: 'jane.doe@email.com' },
          { id: 'patient-003', identifier: 'PAT-0003', given_name: 'Robert', family_name: 'Johnson', birth_date: '1978-11-08', gender: 'male', active: false, email: 'robert.j@email.com' },
          { id: 'patient-004', identifier: 'PAT-0004', given_name: 'Emily', family_name: 'Wilson', birth_date: '1995-01-30', gender: 'female', active: true, email: 'emily.w@email.com' },
          { id: 'patient-005', identifier: 'PAT-0005', given_name: 'Michael', family_name: 'Brown', birth_date: '1982-09-12', gender: 'male', active: true, email: 'michael.b@email.com' }
        ],
        practitioners: [
          { id: 'pract-001', identifier: 'DR-0001', given_name: 'Sarah', family_name: 'Williams', specialty: 'Cardiology', qualification: 'MD, FACC', active: true },
          { id: 'pract-002', identifier: 'DR-0002', given_name: 'James', family_name: 'Anderson', specialty: 'Neurology', qualification: 'MD, PhD', active: true },
          { id: 'pract-003', identifier: 'DR-0003', given_name: 'Maria', family_name: 'Garcia', specialty: 'Pediatrics', qualification: 'MD, FAAP', active: true },
          { id: 'pract-004', identifier: 'DR-0004', given_name: 'David', family_name: 'Lee', specialty: 'Internal Medicine', qualification: 'MD', active: false }
        ],
        appointments: [
          { id: 'appt-001', status: 'booked', start_time: '2024-12-20T09:00:00Z', patient_name: 'John Smith', practitioner_name: 'Dr. Sarah Williams', service_type: 'Follow-up' },
          { id: 'appt-002', status: 'fulfilled', start_time: '2024-12-19T14:00:00Z', patient_name: 'Jane Doe', practitioner_name: 'Dr. James Anderson', service_type: 'Consultation' },
          { id: 'appt-003', status: 'cancelled', start_time: '2024-12-18T10:00:00Z', patient_name: 'Robert Johnson', practitioner_name: 'Dr. Maria Garcia', service_type: 'Annual Physical' },
          { id: 'appt-004', status: 'booked', start_time: '2024-12-21T11:00:00Z', patient_name: 'Emily Wilson', practitioner_name: 'Dr. Sarah Williams', service_type: 'New Patient' },
          { id: 'appt-005', status: 'arrived', start_time: '2024-12-20T08:00:00Z', patient_name: 'Michael Brown', practitioner_name: 'Dr. James Anderson', service_type: 'Follow-up' }
        ]
      };

      // Mock fetch
      const originalFetch = window.fetch;
      window.fetch = async (url) => {
        await new Promise(r => setTimeout(r, 50)); // Simulate network delay
        const path = new URL(url).pathname;

        if (path.includes('/fhir/Patient')) return { ok: true, json: async () => mockData.patients };
        if (path.includes('/Practitioner')) return { ok: true, json: async () => mockData.practitioners };
        if (path.includes('/Appointment')) return { ok: true, json: async () => mockData.appointments };

        return { ok: false, status: 404, json: async () => ({ error: 'Not found' }) };
      };

      let passed = 0;
      let failed = 0;

      // Test helper
      async function test(name, fn) {
        try {
          await fn();
          console.log(`âœ… ${name}`);
          passed++;
        } catch (error) {
          console.log(`âŒ ${name}`);
          console.log(`   Error: ${error.message}`);
          failed++;
        }
        TestingLibrary.cleanup();
      }

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      console.log('\nğŸ“¦ Navigation Tests\n');
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      await test('renders app with sidebar and main content', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        const sidebar = result.container.querySelector('.sidebar');
        if (!sidebar) throw new Error('Sidebar not found');

        const mainWrapper = result.container.querySelector('.main-wrapper');
        if (!mainWrapper) throw new Error('Main wrapper not found');

        if (!document.body.textContent.includes('Dashboard')) throw new Error('Dashboard title not visible');
      });

      await test('navigates to Patients page when clicking nav item', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        const navItems = result.container.querySelectorAll('.nav-item');
        let patientsNav = null;
        navItems.forEach(item => {
          if (item.textContent.includes('Patients')) patientsNav = item;
        });

        if (!patientsNav) throw new Error('Patients nav item not found');
        patientsNav.click();

        await new Promise(r => setTimeout(r, 300));
        if (!document.body.textContent.includes('Manage patient records')) throw new Error('Patients page not displayed');
      });

      await test('navigates to Practitioners page', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        const navItems = result.container.querySelectorAll('.nav-item');
        let nav = null;
        navItems.forEach(item => {
          if (item.textContent.includes('Practitioners')) nav = item;
        });

        if (!nav) throw new Error('Practitioners nav item not found');
        nav.click();

        await new Promise(r => setTimeout(r, 300));
        if (!document.body.textContent.includes('Manage healthcare providers')) throw new Error('Practitioners page not displayed');
      });

      await test('navigates to Appointments page', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        const navItems = result.container.querySelectorAll('.nav-item');
        let nav = null;
        navItems.forEach(item => {
          if (item.textContent.includes('Appointments')) nav = item;
        });

        if (!nav) throw new Error('Appointments nav item not found');
        nav.click();

        await new Promise(r => setTimeout(r, 300));
        if (!document.body.textContent.includes('Manage scheduling')) throw new Error('Appointments page not displayed');
      });

      await test('updates header title when navigating', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        let headerTitle = result.container.querySelector('.header-title');
        if (!headerTitle?.textContent?.includes('Dashboard')) throw new Error('Initial header should show Dashboard');

        const navItems = result.container.querySelectorAll('.nav-item');
        navItems.forEach(item => {
          if (item.textContent.includes('Patients')) item.click();
        });

        await new Promise(r => setTimeout(r, 300));
        headerTitle = result.container.querySelector('.header-title');
        if (!headerTitle?.textContent?.includes('Patients')) throw new Error('Header should show Patients');
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      console.log('\nğŸ“¦ Dashboard Page Tests\n');
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      await test('displays metric cards with correct data', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 500));

        const metricCards = result.container.querySelectorAll('.metric-card');
        if (metricCards.length < 4) throw new Error(`Expected 4 metric cards, got ${metricCards.length}`);

        if (!document.body.textContent.includes('Total Patients')) throw new Error('Patient metric not found');
        if (!document.body.textContent.includes('5')) throw new Error('Patient count should be 5');
      });

      await test('displays Quick Actions section', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        if (!document.body.textContent.includes('Quick Actions')) throw new Error('Quick Actions not found');
        if (!document.body.textContent.includes('New Patient')) throw new Error('New Patient button not found');
      });

      await test('displays Recent Activity section', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        if (!document.body.textContent.includes('Recent Activity')) throw new Error('Recent Activity not found');
        if (!document.body.textContent.includes('View All')) throw new Error('View All button not found');
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      console.log('\nğŸ“¦ Patients Page Tests\n');
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      await test('displays patient table with data', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        // Navigate to Patients
        result.container.querySelectorAll('.nav-item').forEach(item => {
          if (item.textContent.includes('Patients')) item.click();
        });

        await new Promise(r => setTimeout(r, 500));

        if (!document.body.textContent.includes('John Smith')) throw new Error('Patient John Smith not found');
        if (!document.body.textContent.includes('Jane Doe')) throw new Error('Patient Jane Doe not found');
      });

      await test('shows search input on patients page', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        result.container.querySelectorAll('.nav-item').forEach(item => {
          if (item.textContent.includes('Patients')) item.click();
        });

        await new Promise(r => setTimeout(r, 300));

        const searchInput = result.container.querySelector('input[placeholder*="Search"]');
        if (!searchInput) throw new Error('Search input not found');
      });

      await test('shows Add Patient button', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        result.container.querySelectorAll('.nav-item').forEach(item => {
          if (item.textContent.includes('Patients')) item.click();
        });

        await new Promise(r => setTimeout(r, 300));

        if (!document.body.textContent.includes('Add Patient')) throw new Error('Add Patient button not found');
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      console.log('\nğŸ“¦ Practitioners Page Tests\n');
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      await test('displays practitioner cards with data', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        result.container.querySelectorAll('.nav-item').forEach(item => {
          if (item.textContent.includes('Practitioners')) item.click();
        });

        await new Promise(r => setTimeout(r, 500));

        if (!document.body.textContent.includes('Sarah Williams')) throw new Error('Practitioner Sarah Williams not found');
        if (!document.body.textContent.includes('Cardiology')) throw new Error('Specialty Cardiology not found');
      });

      await test('shows practitioner avatars with initials', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        result.container.querySelectorAll('.nav-item').forEach(item => {
          if (item.textContent.includes('Practitioners')) item.click();
        });

        await new Promise(r => setTimeout(r, 500));

        const avatars = result.container.querySelectorAll('.avatar');
        if (avatars.length === 0) throw new Error('No avatars found');
        if (!document.body.textContent.includes('SW')) throw new Error('Initials SW not found');
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      console.log('\nğŸ“¦ Appointments Page Tests\n');
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      await test('displays appointment list with data', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        result.container.querySelectorAll('.nav-item').forEach(item => {
          if (item.textContent.includes('Appointments')) item.click();
        });

        await new Promise(r => setTimeout(r, 500));

        if (!document.body.textContent.includes('John Smith')) throw new Error('Appointment patient not found');
        if (!document.body.textContent.includes('Dr. Sarah Williams')) throw new Error('Appointment practitioner not found');
      });

      await test('displays status filter tabs', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        result.container.querySelectorAll('.nav-item').forEach(item => {
          if (item.textContent.includes('Appointments')) item.click();
        });

        await new Promise(r => setTimeout(r, 300));

        if (!document.body.textContent.includes('Booked')) throw new Error('Booked filter not found');
        if (!document.body.textContent.includes('Fulfilled')) throw new Error('Fulfilled filter not found');
        if (!document.body.textContent.includes('Cancelled')) throw new Error('Cancelled filter not found');
      });

      await test('filters appointments when clicking status tabs', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        result.container.querySelectorAll('.nav-item').forEach(item => {
          if (item.textContent.includes('Appointments')) item.click();
        });

        await new Promise(r => setTimeout(r, 500));

        // Click Booked filter
        const buttons = result.container.querySelectorAll('button');
        buttons.forEach(btn => {
          if (btn.textContent === 'Booked') btn.click();
        });

        await new Promise(r => setTimeout(r, 300));

        // Verify booked appointments are shown
        if (!document.body.textContent.includes('booked')) throw new Error('Booked status not visible after filter');
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      console.log('\nğŸ“¦ Sidebar Tests\n');
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      await test('displays logo and brand name', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        if (!document.body.textContent.includes('Healthcare')) throw new Error('Brand name not found');

        const logo = result.container.querySelector('.sidebar-logo');
        if (!logo) throw new Error('Sidebar logo not found');
      });

      await test('displays navigation sections', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        if (!document.body.textContent.includes('Overview')) throw new Error('Overview section not found');
        if (!document.body.textContent.includes('Clinical')) throw new Error('Clinical section not found');
        if (!document.body.textContent.includes('Scheduling')) throw new Error('Scheduling section not found');
      });

      await test('highlights active navigation item', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        const activeNav = result.container.querySelector('.nav-item.active');
        if (!activeNav) throw new Error('No active nav item found');
        if (!activeNav.textContent.includes('Dashboard')) throw new Error('Dashboard should be active by default');
      });

      await test('toggles sidebar collapse state', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        const toggleBtn = result.container.querySelector('.sidebar-toggle');
        if (!toggleBtn) throw new Error('Sidebar toggle button not found');

        toggleBtn.click();
        await new Promise(r => setTimeout(r, 300));

        const sidebar = result.container.querySelector('.sidebar');
        if (!sidebar.classList.contains('collapsed')) throw new Error('Sidebar should be collapsed');

        toggleBtn.click();
        await new Promise(r => setTimeout(r, 300));

        if (sidebar.classList.contains('collapsed')) throw new Error('Sidebar should be expanded');
      });

      await test('displays user info in footer', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        if (!document.body.textContent.includes('John Doe')) throw new Error('User name not found');
        if (!document.body.textContent.includes('Administrator')) throw new Error('User role not found');
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      console.log('\nğŸ“¦ Header Tests\n');
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      await test('displays search input in header', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        const searchInput = result.container.querySelector('.header-search input');
        if (!searchInput) throw new Error('Header search input not found');
      });

      await test('displays notification bell', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        const bellBtn = result.container.querySelector('.header-action-btn');
        if (!bellBtn) throw new Error('Notification bell not found');
      });

      await test('displays user avatar in header', async () => {
        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        const headerAvatars = result.container.querySelectorAll('.header .avatar');
        if (headerAvatars.length === 0) throw new Error('Header user avatar not found');
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      console.log('\nğŸ“¦ Error Handling Tests\n');
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      await test('shows warning when API returns errors', async () => {
        // Temporarily break fetch
        const savedFetch = window.fetch;
        window.fetch = async () => ({ ok: false, status: 500, json: async () => ({ error: 'Server error' }) });

        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 800));

        // Check for any error indication
        const hasWarning = document.body.textContent.includes('Warning') ||
                          document.body.textContent.includes('Error') ||
                          document.body.textContent.includes('Could not connect') ||
                          document.body.textContent.includes('Could not load');

        window.fetch = savedFetch;

        if (!hasWarning) throw new Error('Should show error/warning state');
      });

      await test('handles empty data gracefully', async () => {
        // Return empty arrays
        const savedFetch = window.fetch;
        window.fetch = async () => ({ ok: true, json: async () => [] });

        const result = TestingLibrary.render(React.createElement(window.App || getApp()));
        await new Promise(r => setTimeout(r, 200));

        // Navigate to Patients
        result.container.querySelectorAll('.nav-item').forEach(item => {
          if (item.textContent.includes('Patients')) item.click();
        });

        await new Promise(r => setTimeout(r, 500));

        window.fetch = savedFetch;

        // Should show some kind of empty state
        const hasEmptyState = document.body.textContent.includes('No') ||
                             document.body.textContent.includes('Empty') ||
                             document.body.textContent.includes('no records') ||
                             document.body.textContent.includes('No Data');

        if (!hasEmptyState) throw new Error('Should show empty state message');
      });

      // Results
      console.log('\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
      console.log(`\nğŸ“Š Results: ${passed} passed, ${failed} failed, ${passed + failed} total`);

      if (failed === 0) {
        console.log('\nğŸ‰ All tests passed!');
      } else {
        console.log(`\nğŸ’¥ ${failed} test(s) failed!`);
      }

      window.testsPassed = passed;
      window.testsFailed = failed;

      // Restore original fetch
      window.fetch = originalFetch;
    }

    // Get App component from the dashboard
    function getApp() {
      // This will be the App component from the dashboard
      return window.App;
    }
  </script>

  <!-- Inline App Component for Testing -->
  <script>
    // Icons as SVG components
    const Icons = {
      Home: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('path', { d: 'M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z' }),
        React.createElement('polyline', { points: '9,22 9,12 15,12 15,22' })
      ),
      Users: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('path', { d: 'M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2' }),
        React.createElement('circle', { cx: 9, cy: 7, r: 4 })
      ),
      UserDoctor: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('path', { d: 'M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2' }),
        React.createElement('circle', { cx: 12, cy: 7, r: 4 })
      ),
      Calendar: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('rect', { x: 3, y: 4, width: 18, height: 18, rx: 2, ry: 2 })
      ),
      Clipboard: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('path', { d: 'M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2' })
      ),
      Search: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('circle', { cx: 11, cy: 11, r: 8 }),
        React.createElement('line', { x1: 21, y1: 21, x2: 16.65, y2: 16.65 })
      ),
      Bell: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('path', { d: 'M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9' })
      ),
      ChevronLeft: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('polyline', { points: '15,18 9,12 15,6' })
      ),
      ChevronRight: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('polyline', { points: '9,6 15,12 9,18' })
      ),
      Activity: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('polyline', { points: '22,12 18,12 15,21 9,3 6,12 2,12' })
      ),
      AlertCircle: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('circle', { cx: 12, cy: 12, r: 10 })
      ),
      TrendUp: () => React.createElement('svg', { className: 'icon icon-sm', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
        React.createElement('polyline', { points: '23,6 13.5,15.5 8.5,10.5 1,18' })
      )
    };

    // Metric Card Component
    const MetricCard = ({ label, value, icon, iconColor, loading }) => (
      React.createElement('div', { className: 'metric-card' },
        React.createElement('div', { className: `metric-icon ${iconColor}` }, icon),
        React.createElement('div', { className: 'metric-value' }, loading ? '-' : value),
        React.createElement('div', { className: 'metric-label' }, label)
      )
    );

    // Data Table Component
    const DataTable = ({ columns, data, loading }) => {
      if (loading) return React.createElement('div', { className: 'skeleton', style: { height: '200px' } });
      if (!data || data.length === 0) return React.createElement('div', { className: 'empty-state' }, 'No Data');
      return React.createElement('div', { className: 'table-container' },
        React.createElement('table', { className: 'table' },
          React.createElement('thead', null,
            React.createElement('tr', null, columns.map(col => React.createElement('th', { key: col.key }, col.header)))
          ),
          React.createElement('tbody', null,
            data.map((row, i) => React.createElement('tr', { key: row.id || i },
              columns.map(col => React.createElement('td', { key: col.key }, col.render ? col.render(row) : row[col.key]))
            ))
          )
        )
      );
    };

    // Dashboard Page
    const DashboardPage = ({ patients, practitioners, appointments }) => {
      const hasError = patients?.error || practitioners?.error || appointments?.error;
      const isLoading = patients?.loading || practitioners?.loading || appointments?.loading;
      return React.createElement('div', { className: 'page' },
        React.createElement('div', { className: 'page-header' },
          React.createElement('h2', { className: 'page-title' }, 'Dashboard'),
          React.createElement('p', { className: 'page-description' }, 'Overview of your healthcare system')
        ),
        hasError && React.createElement('div', { className: 'card warning' }, 'Could not connect to API'),
        React.createElement('div', { className: 'dashboard-grid metrics mb-6' },
          React.createElement(MetricCard, { label: 'Total Patients', value: patients?.data?.length || 0, icon: React.createElement(Icons.Users), iconColor: 'blue', loading: isLoading }),
          React.createElement(MetricCard, { label: 'Practitioners', value: practitioners?.data?.length || 0, icon: React.createElement(Icons.UserDoctor), iconColor: 'teal', loading: isLoading }),
          React.createElement(MetricCard, { label: 'Appointments', value: appointments?.data?.length || 0, icon: React.createElement(Icons.Calendar), iconColor: 'success', loading: isLoading }),
          React.createElement(MetricCard, { label: 'Encounters', value: 0, icon: React.createElement(Icons.Clipboard), iconColor: 'warning', loading: isLoading })
        ),
        React.createElement('div', { className: 'dashboard-grid mixed' },
          React.createElement('div', { className: 'card' },
            React.createElement('h3', null, 'Quick Actions'),
            React.createElement('button', { className: 'btn btn-primary' }, 'New Patient')
          ),
          React.createElement('div', { className: 'card' },
            React.createElement('h3', null, 'Recent Activity'),
            React.createElement('button', { className: 'btn btn-ghost' }, 'View All')
          )
        )
      );
    };

    // Patients Page
    const PatientsPage = ({ data, loading, error }) => {
      const [searchQuery, setSearchQuery] = React.useState('');
      const filteredData = data || [];
      const columns = [
        { key: 'identifier', header: 'ID' },
        { key: 'name', header: 'Name', render: p => `${p.given_name || ''} ${p.family_name || ''}`.trim() || '-' },
        { key: 'gender', header: 'Gender' }
      ];
      return React.createElement('div', { className: 'page' },
        React.createElement('div', { className: 'page-header' },
          React.createElement('h2', { className: 'page-title' }, 'Patients'),
          React.createElement('p', { className: 'page-description' }, 'Manage patient records')
        ),
        React.createElement('div', { className: 'card' },
          React.createElement('div', { className: 'card-header' },
            React.createElement('div', { className: 'header-search' },
              React.createElement(Icons.Search),
              React.createElement('input', { type: 'text', placeholder: 'Search patients...', value: searchQuery, onChange: e => setSearchQuery(e.target.value) })
            ),
            React.createElement('button', { className: 'btn btn-primary' }, 'Add Patient')
          ),
          error ? React.createElement('div', { className: 'empty-state' }, 'Could not load patients') :
            React.createElement(DataTable, { columns, data: filteredData, loading })
        )
      );
    };

    // Practitioners Page
    const PractitionersPage = ({ data, loading, error }) => {
      if (error) return React.createElement('div', { className: 'page' },
        React.createElement('div', { className: 'page-header' },
          React.createElement('h2', { className: 'page-title' }, 'Practitioners'),
          React.createElement('p', { className: 'page-description' }, 'Manage healthcare providers')
        ),
        React.createElement('div', { className: 'card empty-state' }, 'Could not load practitioners')
      );
      return React.createElement('div', { className: 'page' },
        React.createElement('div', { className: 'page-header' },
          React.createElement('h2', { className: 'page-title' }, 'Practitioners'),
          React.createElement('p', { className: 'page-description' }, 'Manage healthcare providers')
        ),
        React.createElement('div', { className: 'dashboard-grid practitioners' },
          (data || []).map(p => React.createElement('div', { key: p.id, className: 'card practitioner-card' },
            React.createElement('div', { className: 'avatar avatar-lg' }, (p.given_name?.[0] || '') + (p.family_name?.[0] || '')),
            React.createElement('h4', null, `${p.given_name || ''} ${p.family_name || ''}`),
            React.createElement('p', null, p.specialty || 'General')
          ))
        )
      );
    };

    // Appointments Page
    const AppointmentsPage = ({ data, loading, error }) => {
      const [filter, setFilter] = React.useState('all');
      const filteredData = (data || []).filter(a => filter === 'all' || a.status?.toLowerCase() === filter);
      const columns = [
        { key: 'patient', header: 'Patient', render: a => a.patient_name || '-' },
        { key: 'practitioner', header: 'Practitioner', render: a => a.practitioner_name || '-' },
        { key: 'status', header: 'Status', render: a => a.status || 'pending' }
      ];
      return React.createElement('div', { className: 'page' },
        React.createElement('div', { className: 'page-header' },
          React.createElement('h2', { className: 'page-title' }, 'Appointments'),
          React.createElement('p', { className: 'page-description' }, 'Manage scheduling')
        ),
        React.createElement('div', { className: 'card' },
          React.createElement('div', { className: 'card-header' },
            React.createElement('div', { className: 'btn-group' },
              ['all', 'booked', 'fulfilled', 'cancelled'].map(f =>
                React.createElement('button', { key: f, className: `btn btn-sm ${filter === f ? 'btn-primary' : 'btn-ghost'}`, onClick: () => setFilter(f) },
                  f.charAt(0).toUpperCase() + f.slice(1)
                )
              )
            )
          ),
          error ? React.createElement('div', { className: 'empty-state' }, 'Could not load appointments') :
            React.createElement(DataTable, { columns, data: filteredData, loading })
        )
      );
    };

    // Sidebar Component
    const Sidebar = ({ activeView, onNavigate, collapsed, onToggle }) => {
      const navSections = [
        { title: 'Overview', items: [{ id: 'dashboard', label: 'Dashboard', icon: Icons.Home }] },
        { title: 'Clinical', items: [{ id: 'patients', label: 'Patients', icon: Icons.Users }] },
        { title: 'Scheduling', items: [
          { id: 'practitioners', label: 'Practitioners', icon: Icons.UserDoctor },
          { id: 'appointments', label: 'Appointments', icon: Icons.Calendar }
        ]}
      ];
      return React.createElement('aside', { className: `sidebar ${collapsed ? 'collapsed' : ''}` },
        React.createElement('div', { className: 'sidebar-header' },
          React.createElement('a', { className: 'sidebar-logo', href: '#' },
            React.createElement('div', { className: 'sidebar-logo-icon' }, React.createElement(Icons.Activity)),
            React.createElement('span', { className: 'sidebar-logo-text' }, 'Healthcare')
          )
        ),
        React.createElement('nav', { className: 'sidebar-nav' },
          navSections.map(section => React.createElement('div', { key: section.title, className: 'nav-section' },
            React.createElement('div', { className: 'nav-section-title' }, section.title),
            section.items.map(item => React.createElement('a', {
              key: item.id,
              className: `nav-item ${activeView === item.id ? 'active' : ''}`,
              onClick: () => onNavigate(item.id)
            },
              React.createElement('span', { className: 'nav-item-icon' }, React.createElement(item.icon)),
              React.createElement('span', { className: 'nav-item-text' }, item.label)
            ))
          ))
        ),
        React.createElement('button', { className: 'sidebar-toggle', onClick: onToggle },
          collapsed ? React.createElement(Icons.ChevronRight) : React.createElement(Icons.ChevronLeft)
        ),
        React.createElement('div', { className: 'sidebar-footer' },
          React.createElement('div', { className: 'sidebar-user' },
            React.createElement('div', { className: 'avatar avatar-sm' }, 'JD'),
            React.createElement('div', { className: 'sidebar-user-info' },
              React.createElement('div', { className: 'sidebar-user-name' }, 'John Doe'),
              React.createElement('div', { className: 'sidebar-user-role' }, 'Administrator')
            )
          )
        )
      );
    };

    // Header Component
    const Header = ({ title }) => (
      React.createElement('header', { className: 'header' },
        React.createElement('div', { className: 'header-left' },
          React.createElement('h1', { className: 'header-title' }, title)
        ),
        React.createElement('div', { className: 'header-right' },
          React.createElement('div', { className: 'header-search' },
            React.createElement(Icons.Search),
            React.createElement('input', { type: 'text', placeholder: 'Search...' })
          ),
          React.createElement('div', { className: 'header-actions' },
            React.createElement('button', { className: 'header-action-btn' }, React.createElement(Icons.Bell)),
            React.createElement('div', { className: 'avatar avatar-md' }, 'JD')
          )
        )
      )
    );

    // Main App Component - exported to window.App
    window.App = () => {
      const [activeView, setActiveView] = React.useState('dashboard');
      const [sidebarCollapsed, setSidebarCollapsed] = React.useState(false);
      const [apiData, setApiData] = React.useState({ patients: null, practitioners: null, appointments: null });

      React.useEffect(() => {
        Promise.all([
          fetch('http://localhost:5000/fhir/Patient').then(r => r.ok ? r.json() : Promise.reject()),
          fetch('http://localhost:5001/Practitioner').then(r => r.ok ? r.json() : Promise.reject()),
          fetch('http://localhost:5001/Appointment').then(r => r.ok ? r.json() : Promise.reject())
        ]).then(([patients, practitioners, appointments]) => {
          setApiData({ patients: { data: patients }, practitioners: { data: practitioners }, appointments: { data: appointments } });
        }).catch(() => {
          setApiData({ patients: { error: true }, practitioners: { error: true }, appointments: { error: true } });
        });
      }, []);

      const titles = { dashboard: 'Dashboard', patients: 'Patients', practitioners: 'Practitioners', appointments: 'Appointments' };

      const renderPage = () => {
        switch (activeView) {
          case 'dashboard': return React.createElement(DashboardPage, apiData);
          case 'patients': return React.createElement(PatientsPage, apiData.patients || {});
          case 'practitioners': return React.createElement(PractitionersPage, apiData.practitioners || {});
          case 'appointments': return React.createElement(AppointmentsPage, apiData.appointments || {});
          default: return React.createElement('div', null, 'Page not found');
        }
      };

      return React.createElement('div', { className: 'app' },
        React.createElement(Sidebar, { activeView, onNavigate: setActiveView, collapsed: sidebarCollapsed, onToggle: () => setSidebarCollapsed(!sidebarCollapsed) }),
        React.createElement('div', { className: 'main-wrapper' },
          React.createElement(Header, { title: titles[activeView] || 'Healthcare' }),
          React.createElement('main', { className: 'main-content' }, renderPage())
        )
      );
    };

    console.log('ğŸ“‹ App component loaded for testing');
  </script>
</body>
</html>
