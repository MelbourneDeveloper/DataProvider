<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Healthcare Dashboard - Clinical and Scheduling Management">
  <title>Healthcare Dashboard</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%232ca3fa' width='100' height='100' rx='20'/%3E%3Cpath fill='white' d='M50 20v60M20 50h60' stroke='white' stroke-width='12' stroke-linecap='round'/%3E%3C/svg%3E">

  <!-- CSS -->
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/layout.css">

  <!-- React CDN (Development) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- For production, use:
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  -->

  <style>
    /* Loading screen */
    .loading-screen {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--primary-blue-subtle) 0%, var(--teal-soft) 50%, var(--white) 100%);
      z-index: 9999;
      transition: opacity 0.3s, visibility 0.3s;
    }

    .loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
    }

    .loading-logo {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--teal-bold) 100%);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 24px;
      animation: pulse 2s ease-in-out infinite;
    }

    .loading-logo svg {
      width: 48px;
      height: 48px;
    }

    .loading-text {
      font-size: 18px;
      font-weight: 500;
      color: var(--gray-700);
    }

    .loading-spinner {
      width: 32px;
      height: 32px;
      border: 3px solid var(--gray-200);
      border-top-color: var(--primary-blue);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-top: 24px;
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loading-screen">
    <div class="loading-logo">
      <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
      </svg>
    </div>
    <div class="loading-text">Healthcare Dashboard</div>
    <div class="loading-spinner"></div>
  </div>

  <!-- React Root -->
  <div id="root"></div>

  <!-- H5 Generated JavaScript -->
  <script src="js/Dashboard.Web.js"></script>

  <!-- Fallback: Pure JS Dashboard if H5 not loaded -->
  <script>
    // Hide loading screen after a delay
    setTimeout(function() {
      document.getElementById('loading-screen').classList.add('hidden');
    }, 1500);

    // If H5 hasn't initialized the app, use fallback
    if (typeof Dashboard === 'undefined') {
      console.log('[Dashboard] Loading React fallback dashboard...');

      // API Configuration
      const CLINICAL_API = window.dashboardConfig?.CLINICAL_API_URL || 'http://localhost:5000';
      const SCHEDULING_API = window.dashboardConfig?.SCHEDULING_API_URL || 'http://localhost:5001';

      // API helper
      const fetchApi = async (url) => {
        try {
          const response = await fetch(url, {
            headers: { 'Accept': 'application/json' }
          });
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          return await response.json();
        } catch (error) {
          console.error(`[API Error] ${url}:`, error);
          throw error;
        }
      };

      // Custom hooks
      const useFetch = (url, dependencies = []) => {
        const [data, setData] = React.useState(null);
        const [loading, setLoading] = React.useState(true);
        const [error, setError] = React.useState(null);

        React.useEffect(() => {
          let mounted = true;
          setLoading(true);
          fetchApi(url)
            .then(result => { if (mounted) { setData(result); setError(null); } })
            .catch(err => { if (mounted) setError(err.message); })
            .finally(() => { if (mounted) setLoading(false); });
          return () => { mounted = false; };
        }, dependencies);

        return { data, loading, error };
      };

      // Icons as SVG components
      const Icons = {
        Home: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('path', { d: 'M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z' }),
          React.createElement('polyline', { points: '9,22 9,12 15,12 15,22' })
        ),
        Users: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('path', { d: 'M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2' }),
          React.createElement('circle', { cx: 9, cy: 7, r: 4 }),
          React.createElement('path', { d: 'M23 21v-2a4 4 0 00-3-3.87' }),
          React.createElement('path', { d: 'M16 3.13a4 4 0 010 7.75' })
        ),
        UserDoctor: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('path', { d: 'M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2' }),
          React.createElement('circle', { cx: 12, cy: 7, r: 4 }),
          React.createElement('line', { x1: 12, y1: 11, x2: 12, y2: 17 }),
          React.createElement('line', { x1: 9, y1: 14, x2: 15, y2: 14 })
        ),
        Calendar: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('rect', { x: 3, y: 4, width: 18, height: 18, rx: 2, ry: 2 }),
          React.createElement('line', { x1: 16, y1: 2, x2: 16, y2: 6 }),
          React.createElement('line', { x1: 8, y1: 2, x2: 8, y2: 6 }),
          React.createElement('line', { x1: 3, y1: 10, x2: 21, y2: 10 })
        ),
        Clipboard: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('path', { d: 'M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2' }),
          React.createElement('rect', { x: 8, y: 2, width: 8, height: 4, rx: 1, ry: 1 })
        ),
        Search: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('circle', { cx: 11, cy: 11, r: 8 }),
          React.createElement('line', { x1: 21, y1: 21, x2: 16.65, y2: 16.65 })
        ),
        Bell: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('path', { d: 'M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9' }),
          React.createElement('path', { d: 'M13.73 21a2 2 0 01-3.46 0' })
        ),
        ChevronLeft: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('polyline', { points: '15,18 9,12 15,6' })
        ),
        ChevronRight: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('polyline', { points: '9,6 15,12 9,18' })
        ),
        Activity: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('polyline', { points: '22,12 18,12 15,21 9,3 6,12 2,12' })
        ),
        AlertCircle: () => React.createElement('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('circle', { cx: 12, cy: 12, r: 10 }),
          React.createElement('line', { x1: 12, y1: 8, x2: 12, y2: 12 }),
          React.createElement('line', { x1: 12, y1: 16, x2: 12.01, y2: 16 })
        ),
        TrendUp: () => React.createElement('svg', { className: 'icon icon-sm', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('polyline', { points: '23,6 13.5,15.5 8.5,10.5 1,18' }),
          React.createElement('polyline', { points: '17,6 23,6 23,12' })
        ),
        TrendDown: () => React.createElement('svg', { className: 'icon icon-sm', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
          React.createElement('polyline', { points: '23,18 13.5,8.5 8.5,13.5 1,6' }),
          React.createElement('polyline', { points: '17,18 23,18 23,12' })
        )
      };

      // Metric Card Component
      const MetricCard = ({ label, value, icon, iconColor, trend, trendValue, loading }) => (
        React.createElement('div', { className: 'metric-card' },
          React.createElement('div', { className: `metric-icon ${iconColor}` }, icon),
          React.createElement('div', { className: 'metric-value' }, loading ? '-' : value),
          React.createElement('div', { className: 'metric-label' }, label),
          trendValue && React.createElement('div', { className: `metric-trend ${trend}` },
            trend === 'up' ? React.createElement(Icons.TrendUp) : React.createElement(Icons.TrendDown),
            ' ', trendValue
          )
        )
      );

      // Data Table Component
      const DataTable = ({ columns, data, loading, onRowClick }) => {
        if (loading) {
          return React.createElement('div', { className: 'table-container' },
            React.createElement('div', { className: 'skeleton-rows' },
              [...Array(5)].map((_, i) => React.createElement('div', { key: i, className: 'skeleton', style: { height: '48px', marginBottom: '8px' } }))
            )
          );
        }
        if (!data || data.length === 0) {
          return React.createElement('div', { className: 'empty-state' },
            React.createElement(Icons.Clipboard),
            React.createElement('h4', { className: 'empty-state-title' }, 'No Data'),
            React.createElement('p', { className: 'empty-state-description' }, 'No records found')
          );
        }
        return React.createElement('div', { className: 'table-container' },
          React.createElement('table', { className: 'table' },
            React.createElement('thead', null,
              React.createElement('tr', null,
                columns.map(col => React.createElement('th', { key: col.key }, col.header))
              )
            ),
            React.createElement('tbody', null,
              data.map((row, i) =>
                React.createElement('tr', {
                  key: row.id || i,
                  className: onRowClick ? 'cursor-pointer' : '',
                  onClick: onRowClick ? () => onRowClick(row) : undefined
                },
                  columns.map(col =>
                    React.createElement('td', { key: col.key }, col.render ? col.render(row) : row[col.key])
                  )
                )
              )
            )
          )
        );
      };

      // Dashboard Page
      const DashboardPage = () => {
        const patients = useFetch(`${CLINICAL_API}/fhir/Patient`);
        const practitioners = useFetch(`${SCHEDULING_API}/Practitioner`);
        const appointments = useFetch(`${SCHEDULING_API}/Appointment`);

        const hasError = patients.error || practitioners.error || appointments.error;
        const isLoading = patients.loading || practitioners.loading || appointments.loading;

        return React.createElement('div', { className: 'page' },
          React.createElement('div', { className: 'page-header' },
            React.createElement('h2', { className: 'page-title' }, 'Dashboard'),
            React.createElement('p', { className: 'page-description' }, 'Overview of your healthcare system')
          ),
          hasError && React.createElement('div', { className: 'card mb-6', style: { borderLeft: '4px solid var(--warning)' } },
            React.createElement('div', { className: 'flex items-center gap-3' },
              React.createElement(Icons.AlertCircle),
              React.createElement('div', null,
                React.createElement('h4', { className: 'font-semibold' }, 'Connection Warning'),
                React.createElement('p', { className: 'text-sm text-gray-600' },
                  'Could not connect to API. Make sure Clinical API (port 5000) and Scheduling API (port 5001) are running.'
                )
              )
            )
          ),
          React.createElement('div', { className: 'dashboard-grid metrics mb-6' },
            React.createElement(MetricCard, { label: 'Total Patients', value: patients.data?.length || 0, icon: React.createElement(Icons.Users), iconColor: 'blue', trend: 'up', trendValue: '+12%', loading: isLoading }),
            React.createElement(MetricCard, { label: 'Practitioners', value: practitioners.data?.length || 0, icon: React.createElement(Icons.UserDoctor), iconColor: 'teal', loading: isLoading }),
            React.createElement(MetricCard, { label: 'Appointments', value: appointments.data?.length || 0, icon: React.createElement(Icons.Calendar), iconColor: 'success', trend: 'up', trendValue: '+8%', loading: isLoading }),
            React.createElement(MetricCard, { label: 'Encounters', value: 0, icon: React.createElement(Icons.Clipboard), iconColor: 'warning', trend: 'down', trendValue: '-3%', loading: isLoading })
          ),
          React.createElement('div', { className: 'dashboard-grid mixed' },
            React.createElement('div', { className: 'card' },
              React.createElement('div', { className: 'card-header' },
                React.createElement('h3', { className: 'card-title' }, 'Quick Actions')
              ),
              React.createElement('div', { className: 'card-body' },
                React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                  React.createElement('button', { className: 'btn btn-primary w-full' }, '+ New Patient'),
                  React.createElement('button', { className: 'btn btn-secondary w-full' }, '+ New Appointment'),
                  React.createElement('button', { className: 'btn btn-secondary w-full' }, 'View Schedule'),
                  React.createElement('button', { className: 'btn btn-secondary w-full' }, 'Patient Search')
                )
              )
            ),
            React.createElement('div', { className: 'card' },
              React.createElement('div', { className: 'card-header' },
                React.createElement('h3', { className: 'card-title' }, 'Recent Activity'),
                React.createElement('button', { className: 'btn btn-ghost btn-sm' }, 'View All')
              ),
              React.createElement('div', { className: 'card-body' },
                React.createElement('div', { className: 'data-list' },
                  [
                    { title: 'New patient registered', subtitle: 'John Smith added', time: '2 min ago' },
                    { title: 'Appointment completed', subtitle: 'Dr. Wilson with Jane Doe', time: '15 min ago' },
                    { title: 'Lab results available', subtitle: 'Patient ID: PAT-0042', time: '1 hour ago' }
                  ].map((item, i) =>
                    React.createElement('div', { key: i, className: 'data-list-item' },
                      React.createElement('div', { className: 'avatar avatar-sm' }, React.createElement(Icons.Activity)),
                      React.createElement('div', { className: 'data-list-item-content' },
                        React.createElement('div', { className: 'data-list-item-title' }, item.title),
                        React.createElement('div', { className: 'data-list-item-subtitle' }, item.subtitle)
                      ),
                      React.createElement('div', { className: 'data-list-item-meta' }, item.time)
                    )
                  )
                )
              )
            )
          )
        );
      };

      // Patients Page
      const PatientsPage = () => {
        const [searchQuery, setSearchQuery] = React.useState('');
        const { data, loading, error } = useFetch(`${CLINICAL_API}/fhir/Patient`);

        const filteredData = React.useMemo(() => {
          if (!data || !searchQuery) return data || [];
          const q = searchQuery.toLowerCase();
          return data.filter(p =>
            (p.given_name && p.given_name.toLowerCase().includes(q)) ||
            (p.family_name && p.family_name.toLowerCase().includes(q)) ||
            (p.identifier && p.identifier.toLowerCase().includes(q))
          );
        }, [data, searchQuery]);

        const columns = [
          { key: 'identifier', header: 'ID' },
          { key: 'name', header: 'Name', render: p => `${p.given_name || ''} ${p.family_name || ''}`.trim() || '-' },
          { key: 'birth_date', header: 'Birth Date', render: p => p.birth_date || '-' },
          { key: 'gender', header: 'Gender', render: p => p.gender ? p.gender.charAt(0).toUpperCase() + p.gender.slice(1) : '-' },
          { key: 'status', header: 'Status', render: () => React.createElement('span', { className: 'badge badge-success' }, 'Active') }
        ];

        return React.createElement('div', { className: 'page' },
          React.createElement('div', { className: 'page-header' },
            React.createElement('h2', { className: 'page-title' }, 'Patients'),
            React.createElement('p', { className: 'page-description' }, 'Manage patient records')
          ),
          React.createElement('div', { className: 'card' },
            React.createElement('div', { className: 'card-header' },
              React.createElement('div', { className: 'header-search' },
                React.createElement(Icons.Search),
                React.createElement('input', {
                  type: 'text',
                  className: 'input',
                  placeholder: 'Search patients...',
                  value: searchQuery,
                  onChange: e => setSearchQuery(e.target.value)
                })
              ),
              React.createElement('button', { className: 'btn btn-primary' }, '+ Add Patient')
            ),
            React.createElement('div', { className: 'card-body' },
              error ? React.createElement('div', { className: 'empty-state' },
                React.createElement(Icons.AlertCircle),
                React.createElement('h4', { className: 'empty-state-title' }, 'Could not load patients'),
                React.createElement('p', { className: 'empty-state-description' }, 'Make sure the Clinical API is running on port 5000')
              ) : React.createElement(DataTable, { columns, data: filteredData, loading })
            )
          )
        );
      };

      // Practitioners Page
      const PractitionersPage = () => {
        const { data, loading, error } = useFetch(`${SCHEDULING_API}/Practitioner`);

        return React.createElement('div', { className: 'page' },
          React.createElement('div', { className: 'page-header' },
            React.createElement('h2', { className: 'page-title' }, 'Practitioners'),
            React.createElement('p', { className: 'page-description' }, 'Manage healthcare providers')
          ),
          error ? React.createElement('div', { className: 'card' },
            React.createElement('div', { className: 'empty-state' },
              React.createElement(Icons.AlertCircle),
              React.createElement('h4', { className: 'empty-state-title' }, 'Could not load practitioners'),
              React.createElement('p', { className: 'empty-state-description' }, 'Make sure the Scheduling API is running on port 5001')
            )
          ) : loading ? React.createElement('div', { className: 'dashboard-grid practitioners' },
            [...Array(6)].map((_, i) => React.createElement('div', { key: i, className: 'card' },
              React.createElement('div', { className: 'skeleton', style: { height: '200px' } })
            ))
          ) : React.createElement('div', { className: 'dashboard-grid practitioners' },
            (data || []).map(p =>
              React.createElement('div', { key: p.id || p.identifier, className: 'card practitioner-card' },
                React.createElement('div', { className: 'practitioner-avatar' },
                  React.createElement('div', { className: 'avatar avatar-lg' },
                    (p.given_name?.[0] || '') + (p.family_name?.[0] || '')
                  )
                ),
                React.createElement('h4', { className: 'practitioner-name' },
                  `${p.given_name || ''} ${p.family_name || ''}`.trim() || 'Unknown'
                ),
                React.createElement('p', { className: 'practitioner-specialty' }, p.specialty || 'General'),
                React.createElement('div', { className: 'practitioner-meta' },
                  React.createElement('span', { className: 'badge badge-info' }, p.qualification || 'MD')
                )
              )
            )
          )
        );
      };

      // Appointments Page
      const AppointmentsPage = () => {
        const [filter, setFilter] = React.useState('all');
        const { data, loading, error } = useFetch(`${SCHEDULING_API}/Appointment`);

        const filteredData = React.useMemo(() => {
          if (!data) return [];
          if (filter === 'all') return data;
          return data.filter(a => a.status?.toLowerCase() === filter);
        }, [data, filter]);

        const columns = [
          { key: 'id', header: 'ID' },
          { key: 'patient', header: 'Patient', render: a => a.patient_name || a.patient_id || '-' },
          { key: 'practitioner', header: 'Practitioner', render: a => a.practitioner_name || a.practitioner_id || '-' },
          { key: 'date', header: 'Date/Time', render: a => a.start_time || a.appointment_date || '-' },
          { key: 'status', header: 'Status', render: a => React.createElement('span', {
            className: `badge ${a.status === 'booked' ? 'badge-primary' : a.status === 'fulfilled' ? 'badge-success' : a.status === 'cancelled' ? 'badge-danger' : 'badge-secondary'}`
          }, a.status || 'pending') }
        ];

        return React.createElement('div', { className: 'page' },
          React.createElement('div', { className: 'page-header' },
            React.createElement('h2', { className: 'page-title' }, 'Appointments'),
            React.createElement('p', { className: 'page-description' }, 'Manage scheduling and appointments')
          ),
          React.createElement('div', { className: 'card' },
            React.createElement('div', { className: 'card-header' },
              React.createElement('div', { className: 'btn-group' },
                ['all', 'booked', 'fulfilled', 'cancelled'].map(f =>
                  React.createElement('button', {
                    key: f,
                    className: `btn btn-sm ${filter === f ? 'btn-primary' : 'btn-ghost'}`,
                    onClick: () => setFilter(f)
                  }, f.charAt(0).toUpperCase() + f.slice(1))
                )
              ),
              React.createElement('button', { className: 'btn btn-primary' }, '+ New Appointment')
            ),
            React.createElement('div', { className: 'card-body' },
              error ? React.createElement('div', { className: 'empty-state' },
                React.createElement(Icons.AlertCircle),
                React.createElement('h4', { className: 'empty-state-title' }, 'Could not load appointments'),
                React.createElement('p', { className: 'empty-state-description' }, 'Make sure the Scheduling API is running on port 5001')
              ) : React.createElement(DataTable, { columns, data: filteredData, loading })
            )
          )
        );
      };

      // Placeholder Page
      const PlaceholderPage = ({ title, description }) => (
        React.createElement('div', { className: 'page' },
          React.createElement('div', { className: 'page-header' },
            React.createElement('h2', { className: 'page-title' }, title),
            React.createElement('p', { className: 'page-description' }, description)
          ),
          React.createElement('div', { className: 'card' },
            React.createElement('div', { className: 'empty-state' },
              React.createElement(Icons.Clipboard),
              React.createElement('h4', { className: 'empty-state-title' }, 'Coming Soon'),
              React.createElement('p', { className: 'empty-state-description' }, 'This page is under development.')
            )
          )
        )
      );

      // Sidebar Component
      const Sidebar = ({ activeView, onNavigate, collapsed, onToggle }) => {
        const navSections = [
          { title: 'Overview', items: [{ id: 'dashboard', label: 'Dashboard', icon: Icons.Home }] },
          { title: 'Clinical', items: [
            { id: 'patients', label: 'Patients', icon: Icons.Users },
            { id: 'encounters', label: 'Encounters', icon: Icons.Clipboard },
            { id: 'conditions', label: 'Conditions', icon: Icons.Activity }
          ]},
          { title: 'Scheduling', items: [
            { id: 'practitioners', label: 'Practitioners', icon: Icons.UserDoctor },
            { id: 'appointments', label: 'Appointments', icon: Icons.Calendar }
          ]}
        ];

        return React.createElement('aside', { className: `sidebar ${collapsed ? 'collapsed' : ''}` },
          React.createElement('div', { className: 'sidebar-header' },
            React.createElement('a', { className: 'sidebar-logo', href: '#' },
              React.createElement('div', { className: 'sidebar-logo-icon' },
                React.createElement(Icons.Activity)
              ),
              React.createElement('span', { className: 'sidebar-logo-text' }, 'Healthcare')
            )
          ),
          React.createElement('nav', { className: 'sidebar-nav' },
            navSections.map(section =>
              React.createElement('div', { key: section.title, className: 'nav-section' },
                React.createElement('div', { className: 'nav-section-title' }, section.title),
                section.items.map(item =>
                  React.createElement('a', {
                    key: item.id,
                    className: `nav-item ${activeView === item.id ? 'active' : ''}`,
                    onClick: () => onNavigate(item.id)
                  },
                    React.createElement('span', { className: 'nav-item-icon' }, React.createElement(item.icon)),
                    React.createElement('span', { className: 'nav-item-text' }, item.label)
                  )
                )
              )
            )
          ),
          React.createElement('button', { className: 'sidebar-toggle', onClick: onToggle },
            collapsed ? React.createElement(Icons.ChevronRight) : React.createElement(Icons.ChevronLeft)
          ),
          React.createElement('div', { className: 'sidebar-footer' },
            React.createElement('div', { className: 'sidebar-user' },
              React.createElement('div', { className: 'avatar avatar-sm' }, 'JD'),
              React.createElement('div', { className: 'sidebar-user-info' },
                React.createElement('div', { className: 'sidebar-user-name' }, 'John Doe'),
                React.createElement('div', { className: 'sidebar-user-role' }, 'Administrator')
              )
            )
          )
        );
      };

      // Header Component
      const Header = ({ title, searchQuery, onSearchChange }) => (
        React.createElement('header', { className: 'header' },
          React.createElement('div', { className: 'header-left' },
            React.createElement('h1', { className: 'header-title' }, title)
          ),
          React.createElement('div', { className: 'header-right' },
            React.createElement('div', { className: 'header-search' },
              React.createElement(Icons.Search),
              React.createElement('input', {
                type: 'text',
                className: 'input',
                placeholder: 'Search...',
                value: searchQuery,
                onChange: e => onSearchChange(e.target.value)
              })
            ),
            React.createElement('div', { className: 'header-actions' },
              React.createElement('button', { className: 'header-action-btn' },
                React.createElement(Icons.Bell),
                React.createElement('span', { className: 'header-action-badge' })
              ),
              React.createElement('div', { className: 'avatar avatar-md' }, 'JD')
            )
          )
        )
      );

      // Main App Component
      const App = () => {
        const [activeView, setActiveView] = React.useState('dashboard');
        const [sidebarCollapsed, setSidebarCollapsed] = React.useState(false);
        const [searchQuery, setSearchQuery] = React.useState('');

        const getPageTitle = () => ({
          dashboard: 'Dashboard',
          patients: 'Patients',
          encounters: 'Encounters',
          conditions: 'Conditions',
          practitioners: 'Practitioners',
          appointments: 'Appointments',
          settings: 'Settings'
        }[activeView] || 'Healthcare');

        const renderPage = () => {
          switch (activeView) {
            case 'dashboard': return React.createElement(DashboardPage);
            case 'patients': return React.createElement(PatientsPage);
            case 'practitioners': return React.createElement(PractitionersPage);
            case 'appointments': return React.createElement(AppointmentsPage);
            case 'encounters': return React.createElement(PlaceholderPage, { title: 'Encounters', description: 'Manage patient encounters and visits' });
            case 'conditions': return React.createElement(PlaceholderPage, { title: 'Conditions', description: 'View and manage patient conditions' });
            default: return React.createElement(PlaceholderPage, { title: 'Page Not Found', description: 'The requested page does not exist' });
          }
        };

        return React.createElement('div', { className: 'app' },
          React.createElement(Sidebar, {
            activeView,
            onNavigate: setActiveView,
            collapsed: sidebarCollapsed,
            onToggle: () => setSidebarCollapsed(!sidebarCollapsed)
          }),
          React.createElement('div', { className: 'main-wrapper' },
            React.createElement(Header, {
              title: getPageTitle(),
              searchQuery,
              onSearchChange: setSearchQuery
            }),
            React.createElement('main', { className: 'main-content' }, renderPage())
          )
        );
      };

      // Export App for testing
      window.App = App;

      // Render the app
      console.log('[Dashboard] Mounting React application...');
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(App));
      console.log('[Dashboard] Application ready!');
    }
  </script>
</body>
</html>
